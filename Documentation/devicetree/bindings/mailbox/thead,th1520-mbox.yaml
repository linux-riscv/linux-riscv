# SPDX-License-Identifier: (GPL-2.0-only OR BSD-2-Clause)

%YAML 1.2
---
$id: http://devicetree.org/schemas/mailbox/thead,th1520-mbox.yaml#
$schema: http://devicetree.org/meta-schemas/core.yaml#

title: T-head TH1520 Mailbox Controller

description: |
  The T-head mailbox controller enables two cores within the SoC to
  communicate and coordinate by passing messages (e.g., data, status,
  and control) through the mailbox channels. It also provides the ability
  for one core to signal the other processor using interrupts.

maintainers:
  - Michal Wilczynski <m.wilczynski@samsung.com>

properties:
  compatible:
    const: thead,th1520-mbox

  reg:
    description: Contains base addresses and sizes for the mailbox and remote ICUs.
    items:
      - description: Mailbox local base address
      - description: Remote ICU 0 base address
      - description: Remote ICU 1 base address
      - description: Remote ICU 2 base address

  reg-names:
    items:
      - const: local_base
      - const: remote_icu0
      - const: remote_icu1
      - const: remote_icu2

  interrupts:
    maxItems: 1
    description: Interrupt for the mailbox controller.

  clocks:
    maxItems: 1
    description: Clock phandle for the mailbox controller.

  clock-names:
    items:
      - const: ipg

  icu_cpu_id:
    $ref: /schemas/types.yaml#/definitions/uint32
    description: CPU ID for the ICU.

  '#mbox-cells':
    const: 2
    description: Number of cells required to encode the mailbox specifier.

additionalProperties: false

required:
  - compatible
  - reg
  - reg-names
  - interrupts
  - icu_cpu_id
  - '#mbox-cells'

dependencies:
  clock-names: [ clocks ]

examples:
  - |
    mbox_910t: mbox@ffffc38000 {
      compatible = "thead,th1520-mbox";
      reg = <0xff 0xffc38000 0x0 0x4000>,
            <0xff 0xffc44000 0x0 0x1000>,
            <0xff 0xffc4c000 0x0 0x1000>,
            <0xff 0xffc54000 0x0 0x1000>;
      reg-names = "local_base", "remote_icu0", "remote_icu1", "remote_icu2";
      interrupts = <28 IRQ_TYPE_LEVEL_HIGH>;
      icu_cpu_id = <0>;
      #mbox-cells = <2>;
    };

# SPDX-License-Identifier: (GPL-2.0-only OR BSD-2-Clause)

%YAML 1.2
---
$id: http://devicetree.org/schemas/mailbox/thead,th1520-mbox.yaml#
$schema: http://devicetree.org/meta-schemas/core.yaml#

title: T-head TH1520 Mailbox Controller

description:
  The T-head mailbox controller enables communication and coordination between
  cores within the SoC by passing messages (e.g., data, status, and control)
  through mailbox channels. It also allows one core to signal another processor
  using interrupts via the Interrupt Controller Unit (ICU).

maintainers:
  - Michal Wilczynski <m.wilczynski@samsung.com>

properties:
  compatible:
    const: thead,th1520-mbox

  reg:
    items:
      - description: Mailbox local base address
      - description: Remote ICU 0 base address
      - description: Remote ICU 1 base address
      - description: Remote ICU 2 base address

  reg-names:
    items:
      - const: local
      - const: remote-icu0
      - const: remote-icu1
      - const: remote-icu2

  interrupts:
    maxItems: 1

  thead,icu-cpu-id:
    $ref: /schemas/types.yaml#/definitions/uint32
    description: |
      CPU ID associated with the Interrupt Controller Unit (ICU). This ID should
      correspond to a valid CPU core in the system. The value must be between 0
      and (N - 1), where N is the total number of CPU cores in the SoC.
    minimum: 0
    maximum: 3

  '#mbox-cells':
    const: 2
    description: |
      Specifies the number of cells needed to encode the mailbox specifier.
      The mailbox specifier consists of two cells:
        - The first cell is the destination CPU ID.
        - The second cell is the mailbox channel ID.

additionalProperties: false

required:
  - compatible
  - reg
  - reg-names
  - interrupts
  - thead,icu-cpu-id
  - '#mbox-cells'

examples:
  - |

    soc {
      #address-cells = <2>;
      #size-cells = <2>;
      mailbox@ffffc38000 {
        compatible = "thead,th1520-mbox";
        reg = <0xff 0xffc38000 0x0 0x4000>,
              <0xff 0xffc44000 0x0 0x1000>,
              <0xff 0xffc4c000 0x0 0x1000>,
              <0xff 0xffc54000 0x0 0x1000>;
        reg-names = "local", "remote-icu0", "remote-icu1", "remote-icu2";
        interrupts = <28>;
        thead,icu-cpu-id = <0>;
        #mbox-cells = <2>;
      };
    };

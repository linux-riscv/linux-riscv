# SPDX-License-Identifier: (GPL-2.0 OR BSD-2-Clause)
# Copyright (C) 2023-2024 SiFive, Inc.
%YAML 1.2
---
$id: http://devicetree.org/schemas/cache/sifive,pl2cache0.yaml#
$schema: http://devicetree.org/meta-schemas/core.yaml#

title: SiFive Private L2 Cache Controller

maintainers:
  - Eric Lin <eric.lin@sifive.com>

description:
  The SiFive Private L2 Cache Controller is a per-core cache which communicates
  with both the upstream L1 caches and downstream L3 cache or memory, enabling a
  high-performance cache subsystem.

allOf:
  - $ref: /schemas/cache-controller.yaml#

select:
  properties:
    compatible:
      contains:
        enum:
          - sifive,pl2cache1

  required:
    - compatible

properties:
  compatible:
    oneOf:
      - items:
          - const: sifive,pl2cache0
          - const: sifive,pl2cache1
          - const: cache
      - items:
          - const: sifive,pl2cache1
          - const: cache

  reg:
    maxItems: 1

  cache-block-size: true
  cache-level: true
  cache-sets: true
  cache-size: true
  cache-unified: true

  next-level-cache: true

  sifive,perfmon-counters:
    $ref: /schemas/types.yaml#/definitions/uint32
    default: 0
    description: Number of PMU counter registers

required:
  - compatible
  - reg
  - cache-block-size
  - cache-level
  - cache-sets
  - cache-size
  - cache-unified

additionalProperties: false

examples:
  - |
    cache-controller@10104000 {
        compatible = "sifive,pl2cache1", "cache";
        reg = <0x10104000 0x4000>;
        cache-block-size = <64>;
        cache-level = <2>;
        cache-sets = <512>;
        cache-size = <262144>;
        cache-unified;
        next-level-cache = <&L4>;
        sifive,perfmon-counters = <6>;
    };
